{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderGallery(images) {\n  const gallery = document.getElementById('gallery');\n  const markup = images\n    .map(\n      image => `\n    <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\"/>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n        <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n        <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n        <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery() {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n}\n","import axios from 'axios';\n\nconst API_KEY = '44812074-4f691c7d06d5961145b89341f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n  return response.data;\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more');\nconst loader = document.getElementById('loader');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet lightbox = new SimpleLightbox('.gallery a');\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  currentQuery = searchInput.value.trim();\n\n  if (!currentQuery) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search term' });\n    return;\n  }\n\n  currentPage = 1;\n  clearGallery();\n  loadMoreButton.style.display = 'none';\n\n  try {\n    toggleLoader(true);\n    const data = await fetchImages(currentQuery, currentPage);\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderGallery(data.hits);\n      lightbox.refresh();\n      loadMoreButton.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    toggleLoader(false);\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    toggleLoader(true);\n    const data = await fetchImages(currentQuery, currentPage);\n    renderGallery(data.hits);\n    lightbox.refresh();\n\n    const { height: cardHeight } =\n      gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (data.hits.length < 15) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    toggleLoader(false);\n  }\n});\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n"],"names":["renderGallery","images","gallery","markup","image","clearGallery","API_KEY","BASE_URL","fetchImages","query","page","axios","searchForm","searchInput","loadMoreButton","loader","currentPage","currentQuery","lightbox","SimpleLightbox","e","iziToast","toggleLoader","data","cardHeight","show"],"mappings":"owBAAO,SAASA,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAASF,EACZ,IACCG,GAAS;AAAA,eACAA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,4CAEZA,EAAM,KAAK;AAAA,4CACXA,EAAM,KAAK;AAAA,+CACRA,EAAM,QAAQ;AAAA,gDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAI1D,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAEO,SAASE,GAAe,CAC7B,MAAMH,EAAU,SAAS,eAAe,SAAS,EACjDA,EAAQ,UAAY,EACtB,CCrBA,MAAMI,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAM,CAY7C,OAXiB,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,GACe,IAClB,CCXA,MAAME,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDX,EAAU,SAAS,eAAe,SAAS,EAC3CY,EAAiB,SAAS,eAAe,WAAW,EACpDC,EAAS,SAAS,eAAe,QAAQ,EAE/C,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAW,IAAIC,EAAe,YAAY,EAE9CP,EAAW,iBAAiB,SAAU,MAAMQ,GAAK,CAI/C,GAHAA,EAAE,eAAc,EAChBH,EAAeJ,EAAY,MAAM,OAE7B,CAACI,EAAc,CACjBI,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,4BAA4B,CAAE,EACxE,MACD,CAEDL,EAAc,EACdX,IACAS,EAAe,MAAM,QAAU,OAE/B,GAAI,CACFQ,EAAa,EAAI,EACjB,MAAMC,EAAO,MAAMf,EAAYS,EAAcD,CAAW,EACpDO,EAAK,KAAK,SAAW,EACvBF,EAAS,KAAK,CACZ,MAAO,OACP,QACE,0EACV,CAAO,GAEDrB,EAAcuB,EAAK,IAAI,EACvBL,EAAS,QAAO,EAChBJ,EAAe,MAAM,QAAU,QAElC,MAAe,CACdO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACL,QAAY,CACRC,EAAa,EAAK,CACnB,CACH,CAAC,EAEDR,EAAe,iBAAiB,QAAS,SAAY,CACnDE,GAAe,EAEf,GAAI,CACFM,EAAa,EAAI,EACjB,MAAMC,EAAO,MAAMf,EAAYS,EAAcD,CAAW,EACxDhB,EAAcuB,EAAK,IAAI,EACvBL,EAAS,QAAO,EAEhB,KAAM,CAAE,OAAQM,CAAY,EAC1BtB,EAAQ,kBAAkB,wBAC5B,OAAO,SAAS,CACd,IAAKsB,EAAa,EAClB,SAAU,QAChB,CAAK,EAEGD,EAAK,KAAK,OAAS,KACrBT,EAAe,MAAM,QAAU,OAC/BO,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,EAEJ,MAAe,CACdA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACL,QAAY,CACRC,EAAa,EAAK,CACnB,CACH,CAAC,EAED,SAASA,EAAaG,EAAM,CAC1BV,EAAO,MAAM,QAAUU,EAAO,QAAU,MAC1C"}